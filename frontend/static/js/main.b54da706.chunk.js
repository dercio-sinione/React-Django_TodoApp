(this.webpackJsonpinicio=this.webpackJsonpinicio||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(3),c=n.n(o),r=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var l=n(4),d=n(5),u=n(7),m=n(6),h=n(1),f=n(8),p=(n(14),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={todoList:[],activeItem:{id:null,title:"",completed:!1},editing:!1},n.fetchTasks=n.fetchTasks.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.getCookie=n.getCookie.bind(Object(h.a)(n)),n.startEdit=n.startEdit.bind(Object(h.a)(n)),n.deleteItem=n.deleteItem.bind(Object(h.a)(n)),n.taskCompleted=n.taskCompleted.bind(Object(h.a)(n)),n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.fetchTasks()}},{key:"fetchTasks",value:function(){var e=this;fetch("http://127.0.0.1:8000/api/task-list/").then((function(e){return e.json()})).then((function(t){return e.setState({todoList:t})}))}},{key:"getCookie",value:function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var i=n[a].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}return t}},{key:"startEdit",value:function(e){this.setState({activeItem:e,editing:!0}),document.getElementById("title").focus()}},{key:"taskCompleted",value:function(e){var t=this;e.completed=!e.completed;var n=this.getCookie("csrftoken");fetch("http://127.0.0.1:8000/api/task-update/".concat(e.id,"/"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":n},body:JSON.stringify({completed:e.completed,title:e.title})}).then((function(e){t.fetchTasks()})).catch((function(e){console.log("Error:",e)}))}},{key:"deleteItem",value:function(e){var t=this,n=this.getCookie("csrftoken");fetch("http://127.0.0.1:8000/api/task-delete/".concat(e.id,"/"),{method:"DELETE",headers:{"Content-type":"application/json","X-CSRFToken":n}}).then((function(e){t.fetchTasks()})).catch((function(e){console.log("Error:",e)}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.getCookie("csrftoken"),a="http://127.0.0.1:8000/api/task-create/";this.state.editing&&(a="http://127.0.0.1:8000/api/task-update/".concat(this.state.activeItem.id,"/"),this.setState({editing:!1})),fetch(a,{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":n},body:JSON.stringify(this.state.activeItem)}).then((function(e){t.fetchTasks(),t.setState({activeItem:{id:null,title:"",completed:!1}})})).catch((function(e){console.log("Error:",e)}))}},{key:"handleChange",value:function(e){this.setState({activeItem:{id:this.state.activeItem.id,title:e.target.value,completed:this.state.activeItem.completed}})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"container"},i.a.createElement("div",{id:"task-container"},i.a.createElement("div",{id:"form-wrapper"},i.a.createElement("form",{onSubmit:this.handleSubmit,id:"form"},i.a.createElement("div",{className:"flex-wrapper"},i.a.createElement("div",{style:{flex:6}},i.a.createElement("input",{onChange:this.handleChange,className:"form-control",id:"title",value:this.state.activeItem.title,type:"text",name:"title",placeholder:"Add task.."})),i.a.createElement("div",{style:{flex:1}},i.a.createElement("input",{id:"submit",className:"btn btn-warning",type:"submit",name:"Add"}))))),i.a.createElement("div",{id:"list-wrapper"},this.state.todoList.map((function(t,n){return i.a.createElement("div",{key:n,className:"task-wrapper flex-wrapper"},i.a.createElement("div",{onDoubleClick:function(){return e.startEdit(t)},style:{flex:7}},t.completed?i.a.createElement("strike",null,t.title):i.a.createElement("span",null,t.title)),i.a.createElement("div",{style:{flex:1}},t.completed?i.a.createElement("button",{onClick:function(){return e.taskCompleted(t)},className:"btn btn-sm btn-success"},"Done"):i.a.createElement("button",{onClick:function(){return e.taskCompleted(t)},className:"btn btn-sm btn-outline-success"},"Done")),i.a.createElement("div",{style:{flex:1}},i.a.createElement("button",{onClick:function(){return e.startEdit(t)},className:"btn btn-sm btn-outline-info"},"Edit")),i.a.createElement("div",{style:{flex:1,marginLeft:"-10px"}},i.a.createElement("button",{onClick:function(){return e.deleteItem(t)},className:"btn btn-sm btn-outline-danger"},"Delete")))})))))}}]),t}(i.a.Component));c.a.render(i.a.createElement("div",null,i.a.createElement(p,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");r?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(t,e)}))}}()},9:function(e,t,n){e.exports=n(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.b54da706.chunk.js.map